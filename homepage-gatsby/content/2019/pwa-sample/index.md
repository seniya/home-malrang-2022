---
emoji: ğŸ§¢
title: PWA. Progressive Web App sample code - by Google
subtitle: í•´ë‹¹ ìƒ˜í”Œ ì½”ë“œë¥¼ í†µí•˜ì—¬ PWA ê°œë…ì„ ì´í•´í•œë‹¤.
date: '2019-02-18 00:00:00'
author: malrang
tags: PWA
categories: ë¸”ë¡œê·¸
comments: true
---

## Sample Image

![ë°ëª¨ í™”ë©´](https://raw.githubusercontent.com/seniya/pwa-sample/master/pwa-example-1.PNG)

## Progressive Web Appì´ë€

ë‹¤ìˆ˜ì˜ í‘œì¤€ê¸°ìˆ ëª¨ìŒì— ê¸°ë°˜ì„ ë‘ëŠ” Webì˜ ì¥ì ê³¼ Appì˜ ì¥ì ì„ ê²°í•©í•œ Web App ì˜ ì»¨ì…‰. (êµ¬í˜„ì²´ê°€ ì•„ë‹˜)

## ì£¼ìš” í‚¤ì›Œë“œ

- í”„ë¡œê·¸ë ˆì‹œë¸Œ : ì ì§„ì ì¸ ê°œì„ ì„ í†µí•´ ì‘ì„±ë˜ë¯€ë¡œ, ì–´ë–¤ ë¸Œë¼ìš°ì €ë¥¼ ì„ íƒí•˜ë“  ìƒê´€ì—†ì´ ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ì í•©í•©ë‹ˆë‹¤.
- **ë°˜ì‘í˜•** : ë°ìŠ¤í¬í†±, ëª¨ë°”ì¼, íƒœë¸”ë¦¿ ë“± ëª¨ë“  í¼ íŒ©í„°ì— ë§ìŠµë‹ˆë‹¤.
- **ì—°ê²° ë…ë¦½ì ** : ì„œë¹„ìŠ¤ ì›Œì»¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜¤í”„ë¼ì¸ì´ë‚˜ ëŠë¦° ë„¤íŠ¸ì›Œí¬ì—ì„œ ì‘ë™í•˜ë„ë¡ í–¥ìƒë©ë‹ˆë‹¤.
- **ì•±ê³¼ ìœ ì‚¬** : ì•± ì…¸ ëª¨ë“œì—ì„œ ì‘ì„±ë˜ê¸° ë•Œë¬¸ì— ì•± ìŠ¤íƒ€ì¼ì˜ ìƒí˜¸ì‘ìš© ë° íƒìƒ‰ ê¸°ëŠ¥ì„ ì‚¬ìš©ìì—ê²Œ ì œê³µí•©ë‹ˆë‹¤.
- ìµœì‹  ìƒíƒœ : ì„œë¹„ìŠ¤ ì›Œì»¤ ì—…ë°ì´íŠ¸ í”„ë¡œì„¸ìŠ¤ ë•ë¶„ì— í•­ìƒ ìµœì‹  ìƒíƒœë¡œ ìœ ì§€ë©ë‹ˆë‹¤.
- ì•ˆì „ : HTTPSë¥¼ í†µí•´ ì œê³µë˜ë¯€ë¡œ ìŠ¤ëˆ„í•‘ì´ ì°¨ë‹¨ë˜ë©°, ì½˜í…ì¸ ê°€ ë³€ì¡°ë˜ì§€ ì•Šë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.
- ê²€ìƒ‰ ê°€ëŠ¥ : W3C ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ë° ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ ë²”ìœ„ ë•ë¶„ì— 'ì• í”Œë¦¬ì¼€ì´ì…˜'ìœ¼ë¡œ ì‹ë³„ë˜ë¯€ë¡œ, ê²€ìƒ‰ ì—”ì§„ì—ì„œ ê²€ìƒ‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- **ì¬ì°¸ì—¬ ê°€ëŠ¥** : í‘¸ì‹œ ì•Œë¦¼ê³¼ ê°™ì€ ê¸°ëŠ¥ì„ í†µí•´ ì‰½ê²Œ ì¬ì°¸ì—¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- ì„¤ì¹˜ ê°€ëŠ¥ : ì•± ìŠ¤í† ì–´ì—ì„œ ì”¨ë¦„í•  í•„ìš” ì—†ì´ ì‚¬ìš©ìê°€ ìì‹ ì—ê²Œ ê°€ì¥ ìœ ìš©í•œ ì•±ì„ í™ˆ í™”ë©´ì— ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë§í¬ ì—°ê²° ê°€ëŠ¥ : URLì„ í†µí•´ ì†ì‰½ê²Œ ê³µìœ í•  ìˆ˜ ìˆìœ¼ë©° ë³µì¡í•œ ì„¤ì¹˜ ì‘ì—…ì´ ë¶ˆí•„ìš”í•©ë‹ˆë‹¤.

### \* ë§¤ë‹ˆí˜ìŠ¤íŠ¸ (manifest.json) ì‚¬ìš©

ì›¹ ì•± ë§¤ë‹ˆí˜ìŠ¤íŠ¸ëŠ” ì‚¬ì´íŠ¸ ë¶ë§ˆí¬ë¥¼ ê¸°ê¸°ì˜ í™ˆ í™”ë©´ì— ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µ

```javascript
{
	"name": "Weather",
	"short_name": "Weather",
	"icons": [
		{
		"src": "images/icons/icon-128x128.png",
		"sizes": "128x128",
		"type": "image/png"
		},{
		"src": "images/icons/icon-144x144.png",
		"sizes": "144x144",
		"type": "image/png"
		}...
	],
	"start_url": "/index.html",
	"display": "standalone",
	"background_color": "#3E4EB8",
	"theme_color": "#2F3BA2"
}
```

![ë°ëª¨ í™”ë©´](https://raw.githubusercontent.com/seniya/pwa-sample/master/pwa-example-2.PNG)
![ë°ëª¨ í™”ë©´](https://raw.githubusercontent.com/seniya/pwa-sample/master/pwa-example-3.PNG)
![ë°ëª¨ í™”ë©´](https://raw.githubusercontent.com/seniya/pwa-sample/master/pwa-example-4.PNG)

### \* ë°˜ì‘í˜• CSS ì‚¬ìš©

```html
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
```

```css
body {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-flex-wrap: nowrap;
  -ms-flex-wrap: nowrap;
  flex-wrap: nowrap;
  ...;
}
```

### Service Worker í™œìš©

```javascript
// ì„œë¹„ìŠ¤ ì›Œì»¤ê°€ ìˆëŠ”ì§€ í™•ì¸
if ('serviceWorker' in navigator) {
  // ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ ì²˜ë¦¬
  navigator.serviceWorker.register('./service-worker.js').then(function () {
    console.log('Service Worker Registered');
  });
}
```

```javascript
// ì„¤ì¹˜ í›„ ì‘ì—…
self.addEventListener('install', function(e) {
	console.log('ì„¤ì¹˜ ì™„ë£Œ',  event);
	...
});
self.addEventListener('activate', function(e) {
	...
});
self.addEventListener('fetch', function(e) {
	...
});
```

![ë°ëª¨ í™”ë©´](https://raw.githubusercontent.com/seniya/pwa-sample/master/pwa-example-6.png)

## í˜„ì‹¤ì ì¸ ì´ìš© ì „ëµ

- **PWA**ë¥¼ êµ¬ì„±í•˜ëŠ” í•µì‹¬ ê¸°ìˆ ì€ **Service Worker**(ì˜¤í”„ë¼ì¸ ìºì‹±) ì„ í†µí•œ ì†ë„ í–¥ìƒ.
- ë§ˆì°¬ê°€ì§€ë¡œ ì‚¬ìš© ì†ë„ë¥¼ ë”ìš± ë†’ì´ë ¤ëŠ” ì—¬ëŸ¬ ê¸°ìˆ ë“¤ì´ í‚¤ì›Œë“œì˜ ì¤‘ì‹¬ì´ ë¨.
- ë¦¬ì†ŒìŠ¤ì˜ ìµœì†Œí™”, Lazy Loding ê¸°ë²•, CRP(critical rendering path) ë“±ë“±.
- ê²°êµ­ Web App ì˜ ë¯¸ë˜ ì§„í–‰ë°©í–¥ì„ í’€ì–´ë†“ì€ ì»¨ì…‰ì´ë¼ íŒë‹¨ë¨.

## ê³ ë¯¼í•´ë³¼ ë¬¸ì œ

- ê´‘ë²”ìœ„í•œ íŠ¹ì§•ê³¼ í‚¤ì›Œë“œë“¤ì´ ë‚˜ì—´ë˜ë¯€ë¡œì„œ ì •í™•í•œ ì»¨ì…‰ì„ ì´í•´í•˜ê¸° ì–´ë ¤ì›€.
- ì •í˜•í™” ë˜ëŠ” íŠ¸ë Œë“œí•œ êµ¬í˜„ì²´ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ.(ê°œë°œì ì—­ëŸ‰ì— í¬ê²Œ ì˜í–¥ì„ ë¯¸ì¹¨)
- ìºì‹±ì˜ ë²„ì „ê´€ë¦¬ ì‹¤ë¬´ ì ìš©ì˜ ë¶ˆí¸í•¨. (ìš´ì˜í•˜ëŠ” ì…ì¥ì˜ ë¶ˆí¸í•¨ ì¦ê°€.)

## CODE

```javascript
var dataCacheName = 'weatherData-v1';
var cacheName = 'weatherPWA-final-1';
var filesToCache = [
  '/',
  '/index.html',
  '/scripts/app.js',
  '/styles/inline.css',
  '/images/clear.png',
  '/images/cloudy-scattered-showers.png',
  ...
];

/*
1.ìºì‹œ ì˜ì—­ì„ ì •ì˜í•˜ê³ 
2.í•´ë‹¹ ìºì‹œì˜ì—­ì— ë¯¸ë¦¬ ì •ì˜ëœ ìºì‹œë  ëª©ë¡ì„ ë„£ëŠ”ë‹¤.
*/
self.addEventListener('install', function(e) {
  console.log('[ServiceWorker] Install');
  e.waitUntil(
    caches.open(cacheName).then(function(cache) {
      console.log('[ServiceWorker] Caching app shell');
      return cache.addAll(filesToCache);
    })
  );
});

/*
ì´ì „ ì„œë¹„ìŠ¤ ì›Œì»¤ê°€ ì‚¬ë¼ì§€ê³  ìƒˆ ì„œë¹„ìŠ¤ ì›Œì»¤ê°€ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ” ê²½ìš° ì´ ì‘ì—…ì´ ì‹œì‘ë¨.
ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ë° ìºì‹œ ì§€ìš°ê¸° ê°™ì€ ì‘ì—…ì„ ì§„í–‰í•¨.
*/
self.addEventListener('activate', function(e) {
  console.log('[ServiceWorker] Activate');
  e.waitUntil(
    caches.keys().then(function(keyList) {
      return Promise.all(keyList.map(function(key) {
        if (key !== cacheName && key !== dataCacheName) {
          console.log('[ServiceWorker] Removing old cache', key);
          return caches.delete(key);
        }
      }));
    })
  );
  return self.clients.claim();
});
/*
ìƒì„±ëœ ìš”ì²­ì„ ê°€ë¡œì±„ì„œ ì„œë¹„ìŠ¤ ì›Œì»¤ ì²˜ë¦¬.
ì¦‰, ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ê³¼ ìºì‹œëœ ì‘ë‹µì˜ ì œê³µ ë°©ë²•ì„ ê²°ì •.
*/
self.addEventListener('fetch', function(e) {
  console.log('[Service Worker] Fetch', e.request.url);
  var dataUrl = 'https://query.yahooapis.com/v1/public/yql';
  if (e.request.url.indexOf(dataUrl) > -1) {
    e.respondWith(
      caches.open(dataCacheName).then(function(cache) {
        return fetch(e.request).then(function(response){
          cache.put(e.request.url, response.clone());
          return response;
        });
      })
    );
  } else {
    e.respondWith(
      caches.match(e.request).then(function(response) {
        return response || fetch(e.request);
      })
    );
  }
});
```

![ë°ëª¨ í™”ë©´](https://raw.githubusercontent.com/seniya/pwa-sample/master/pwa-example-5.PNG)

## í´ë” êµ¬ì¡°

```
project
â”‚ README.md
â”‚ favicon.ico
â”‚ index.html
â”‚ manifest.json
â”‚ service-worker.js
â””â”€â”€â”€images
â””â”€â”€â”€script
|   â”‚ App.js
â””â”€â”€â”€styles
|   â”‚ inline.js
```

## Available Scripts

1. uses a local Web-Server.
   ex) [Web Server for Chrome](https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb?hl=ko)

## Learn More

- ì†ŒìŠ¤ ì¶œì²˜ : [ì—¬ëŸ¬ë¶„ì˜ ì²« Progressive Web App](https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/?hl=ko)
- ì°¸ê³  : [2018ë…„ê³¼ ì´í›„ JavaScriptì˜ ë™í–¥ - ë¸Œë¼ìš°ì € ë°–ì˜ JavaScript](https://d2.naver.com/helloworld/5644368?utm_source=gaerae.com&utm_campaign=%EA%B0%9C%EB%B0%9C%EC%9E%90%EC%8A%A4%EB%9F%BD%EB%8B%A4&utm_medium=social)
- ì°¸ê³  : [í”„ë¡œê·¸ë ˆì‹œë¸Œ ì›¹ ì•±](https://www.seenbuy.kr/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%A0%88%EC%8B%9C%EB%B8%8C-%EC%9B%B9-%EC%95%B1-pwa-progressive-web-apps/)

```toc

```
